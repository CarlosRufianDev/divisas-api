@use './variables' as vars;

// ============================================================================
// üé® SISTEMA DE MIXINS PARA CALCULADORA
// Siguiendo el patr√≥n del dashboard con mejoras espec√≠ficas
// ============================================================================

// üìê LAYOUT MIXINS
@mixin flex-center($direction: row, $gap: 0) {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: $direction;
  gap: $gap;
}

@mixin flex-between($align: center) {
  display: flex;
  justify-content: space-between;
  align-items: $align;
}

@mixin flex-column($gap: 0) {
  display: flex;
  flex-direction: column;
  gap: $gap;
}

@mixin grid-responsive($min-width: 280px, $gap: 1.5rem) {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax($min-width, 1fr));
  gap: $gap;
}

// üå´Ô∏è GLASSMORPHISM SYSTEM
@mixin glass-card($opacity: 0.9, $blur: 10px) {
  background: rgba(255, 255, 255, $opacity);
  backdrop-filter: blur($blur);
  border-radius: vars.$radius-lg;
  box-shadow: vars.$shadow-md;
  border: 1px solid vars.$glass-white-border;
  transition: vars.$transition-normal;
}

@mixin glass-card-dark($opacity: 0.1, $blur: 20px) {
  background: linear-gradient(135deg, 
    rgba(255, 255, 255, $opacity) 0%, 
    rgba(255, 255, 255, $opacity * 0.5) 100%
  );
  backdrop-filter: blur($blur);
  border-radius: vars.$radius-lg;
  box-shadow: vars.$shadow-lg;
  border: 1px solid rgba(255, 255, 255, 0.2);
}

@mixin glass-header() {
  background: linear-gradient(135deg, rgba(30, 41, 59, 0.8), rgba(51, 65, 85, 0.8));
  color: white;
  padding: 1.5rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

// üéØ HOVER EFFECTS
@mixin hover-lift($translateY: -2px, $scale: 1.002) {
  transition: vars.$transition-normal;
  
  &:hover {
    transform: translateY($translateY) scale($scale);
    box-shadow: vars.$shadow-xl;
  }
}

@mixin hover-glow($color: vars.$info-blue) {
  transition: vars.$transition-normal;
  
  &:hover {
    box-shadow: 0 0 20px rgba($color, 0.3), vars.$shadow-lg;
  }
}

// üé® BUTTON SYSTEM
@mixin button-base() {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-family: 'Inter', sans-serif;
  font-weight: 600;
  border: none;
  border-radius: vars.$radius-md;
  cursor: pointer;
  transition: vars.$transition-normal;
  text-decoration: none;
  position: relative;
  overflow: hidden;
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

@mixin button-gradient($color1, $color2) {
  @include button-base();
  background: linear-gradient(135deg, $color1 0%, $color2 100%);
  color: white;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.5s ease;
  }
  
  &:hover::before {
    left: 100%;
  }
}

@mixin button-calculator() {
  @include button-gradient(vars.$calculator-primary, vars.$primary-purple);
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  min-height: 48px;
  border-radius: vars.$radius-lg;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(vars.$calculator-primary, 0.3);
  }
}

// üìù FORM INPUTS
@mixin input-field() {
  width: 100%;
  padding: 1rem;
  border: 2px solid transparent;
  border-radius: vars.$radius-md;
  background: vars.$glass-white;
  backdrop-filter: blur(10px);
  font-family: 'Inter', sans-serif;
  font-size: 1rem;
  transition: vars.$transition-normal;
  
  &:focus {
    outline: none;
    border-color: vars.$calculator-primary;
    box-shadow: 0 0 0 3px rgba(vars.$calculator-primary, 0.1);
  }
  
  &::placeholder {
    color: #9ca3af;
  }
}

@mixin select-field() {
  @include input-field();
  cursor: pointer;
  
  &:hover {
    border-color: vars.$calculator-secondary;
  }
}

// üè∑Ô∏è CARD SYSTEMS
@mixin result-card() {
  @include glass-card(0.95, 15px);
  padding: vars.$spacing-xl;
  margin-bottom: vars.$spacing-lg;
  border-left: 4px solid vars.$calculator-primary;
  
  &:hover {
    @include hover-lift(-3px, 1.005);
  }
}

@mixin conversion-card() {
  @include glass-card(0.9, 12px);
  padding: vars.$spacing-lg;
  border-radius: vars.$radius-xl;
  border: 1px solid rgba(vars.$calculator-primary, 0.2);
  background: vars.$result-card-gradient;
  
  &:hover {
    border-color: rgba(vars.$calculator-primary, 0.4);
    @include hover-glow(vars.$calculator-primary);
  }
}

@mixin multiple-conversion-card() {
  @include glass-card(0.88, 10px);
  padding: vars.$spacing-md;
  margin-bottom: vars.$spacing-sm;
  border-radius: vars.$radius-lg;
  background: vars.$multiple-result-gradient;
  border: 1px solid rgba(vars.$warning-yellow, 0.3);
  
  &:hover {
    @include hover-lift(-2px, 1.002);
    border-color: rgba(vars.$warning-yellow, 0.5);
  }
}

// üì± RESPONSIVE MIXINS
@mixin mobile-only {
  @media (max-width: vars.$mobile) {
    @content;
  }
}

@mixin tablet-up {
  @media (min-width: 769px) {
    @content;
  }
}

@mixin desktop-up {
  @media (min-width: vars.$tablet) {
    @content;
  }
}

// üé® HEADER PATTERN (SIGUIENDO DASHBOARD)
@mixin section-header() {
  background: vars.$gradient-primary;
  color: white;
  padding: 2.5rem 2rem 2rem;
  border-radius: vars.$radius-2xl;
  position: relative;
  overflow: hidden;
  box-shadow: vars.$shadow-lg, inset 0 1px 0 rgba(255, 255, 255, 0.1);
  margin-bottom: vars.$spacing-2xl;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(
      circle at 20% 50%,
      rgba(59, 130, 246, 0.1) 0%,
      transparent 50%
    ), radial-gradient(
      circle at 80% 20%,
      rgba(16, 185, 129, 0.1) 0%,
      transparent 50%
    );
    pointer-events: none;
  }
}

// üî¢ CURRENCY DISPLAY MIXINS
@mixin currency-display() {
  font-family: 'JetBrains Mono', monospace;
  font-weight: 600;
  font-size: 1.25rem;
  color: vars.$calculator-primary;
  letter-spacing: 0.05em;
}

@mixin amount-display($size: 1.5rem) {
  font-family: 'JetBrains Mono', monospace;
  font-weight: 700;
  font-size: $size;
  color: vars.$success-green;
  letter-spacing: 0.02em;
}

// üéØ UTILITY MIXINS
@mixin text-gradient($color1, $color2) {
  background: linear-gradient(135deg, $color1 0%, $color2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

@mixin loading-shimmer() {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

// ============================================================================
// üìù MIXINS PARA TIPOGRAF√çA
// ============================================================================
@mixin heading-lg() {
  font-family: 'Inter', sans-serif;
  font-size: clamp(1.5rem, 3vw, 2rem);
  font-weight: 700;
  line-height: 1.2;
  margin: 0 0 vars.$spacing-md 0;
}

@mixin heading-md() {
  font-family: 'Inter', sans-serif;
  font-size: clamp(1.25rem, 2.5vw, 1.5rem);
  font-weight: 600;
  line-height: 1.3;
  margin: 0 0 vars.$spacing-sm 0;
}

@mixin heading-sm() {
  font-family: 'Inter', sans-serif;
  font-size: clamp(1rem, 2vw, 1.25rem);
  font-weight: 500;
  line-height: 1.4;
  margin: 0 0 vars.$spacing-xs 0;
}

@mixin text-primary() {
  font-family: 'Inter', sans-serif;
  color: vars.$info-blue;
  font-weight: 500;
}

@mixin text-secondary() {
  font-family: 'Inter', sans-serif;
  color: #6b7280;
  font-size: 0.875rem;
}

// ============================================================================
// üìù MIXINS PARA FORMULARIOS
// ============================================================================
@mixin form-field-enhanced() {
  .mat-mdc-form-field {
    width: 100%;
    
    .mat-mdc-text-field-wrapper {
      background: rgba(255, 255, 255, 0.9) !important;
      border-radius: vars.$radius-md !important;
      border: 2px solid rgba(59, 130, 246, 0.1) !important;
      transition: vars.$transition-normal !important;
      
      &:hover {
        border-color: rgba(59, 130, 246, 0.3) !important;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1) !important;
      }
    }
    
    &.mat-focused {
      .mat-mdc-text-field-wrapper {
        border-color: vars.$info-blue !important;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2) !important;
      }
    }
    
    .mat-mdc-form-field-label {
      color: vars.$info-blue !important;
      font-weight: 500 !important;
    }
    
    .mat-mdc-input-element {
      color: #1f2937 !important;
      font-weight: 500 !important;
    }
  }
}

@mixin select-field-enhanced() {
  .mat-mdc-select {
    .mat-mdc-select-trigger {
      background: rgba(255, 255, 255, 0.9) !important;
      border-radius: vars.$radius-md !important;
      border: 2px solid rgba(59, 130, 246, 0.1) !important;
      transition: vars.$transition-normal !important;
      
      &:hover {
        border-color: rgba(59, 130, 246, 0.3) !important;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1) !important;
      }
    }
    
    &.mat-focused {
      .mat-mdc-select-trigger {
        border-color: vars.$info-blue !important;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2) !important;
      }
    }
  }
}

// ============================================================================
// üéØ MIXINS PARA SECCIONES DE TARJETAS
// ============================================================================
@mixin card-header-section() {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: vars.$spacing-md;
  
  .currency-pair {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 600;
    font-size: 1.125rem;
    color: vars.$info-blue;
  }
  
  .timestamp {
    font-size: 0.75rem;
    color: #6b7280;
    font-weight: 400;
  }
}

@mixin card-main-info() {
  margin: vars.$spacing-md 0;
  
  .conversion-amount {
    font-family: 'JetBrains Mono', monospace;
    font-size: 1.5rem;
    font-weight: 700;
    color: #1f2937;
    margin-bottom: vars.$spacing-xs;
  }
  
  .exchange-rate {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.875rem;
    color: #6b7280;
    font-weight: 500;
  }
}

@mixin card-actions-section() {
  display: flex;
  gap: vars.$spacing-sm;
  margin-top: vars.$spacing-md;
  padding-top: vars.$spacing-md;
  border-top: 1px solid rgba(226, 232, 240, 0.6);
  
  button {
    @include button-base();
    padding: vars.$spacing-xs vars.$spacing-sm;
    font-size: 0.75rem;
    background: rgba(59, 130, 246, 0.1);
    color: vars.$info-blue;
    border: 1px solid rgba(59, 130, 246, 0.2);
    
    &:hover {
      background: rgba(59, 130, 246, 0.2);
      transform: translateY(-1px);
    }
  }
}

@mixin trend-indicator() {
  display: inline-flex;
  align-items: center;
  gap: vars.$spacing-xs;
  padding: vars.$spacing-xs vars.$spacing-sm;
  border-radius: vars.$radius-sm;
  font-size: 0.75rem;
  font-weight: 500;
  
  &.positive {
    background: rgba(16, 185, 129, 0.1);
    color: vars.$success-green;
  }
  
  &.negative {
    background: rgba(239, 68, 68, 0.1);
    color: vars.$error-red;
  }
  
  &.neutral {
    background: rgba(107, 114, 128, 0.1);
    color: vars.$conversion-neutral;
  }
}

@mixin trend-card-border($color, $gradient) {
  border-left: 4px solid $color;
  background: $gradient;
}

@mixin trend-up-card() {
  @include trend-card-border(vars.$trend-up-color, vars.$trend-up-bg);
}

@mixin trend-down-card() {
  @include trend-card-border(vars.$trend-down-color, vars.$trend-down-bg);
}

@mixin trend-neutral-card() {
  @include trend-card-border(vars.$trend-neutral-color, vars.$trend-neutral-bg);
}

// ============================================================================
// üì± MIXINS RESPONSIVE
// ============================================================================
@mixin mobile-only {
  @media (max-width: vars.$mobile) {
    @content;
  }
}

@mixin tablet-up {
  @media (min-width: calc(vars.$mobile + 1px)) {
    @content;
  }
}

@mixin desktop-up {
  @media (min-width: vars.$desktop) {
    @content;
  }
}

// ============================================================================
// üé® MIXINS PARA BOTONES
// ============================================================================
@mixin button-base() {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: vars.$spacing-xs;
  padding: vars.$spacing-md vars.$spacing-lg;
  border: none;
  border-radius: vars.$radius-md;
  font-family: 'Inter', sans-serif;
  font-weight: 500;
  font-size: 0.875rem;
  line-height: 1;
  cursor: pointer;
  transition: vars.$transition-normal;
  text-decoration: none;
  
  &:focus {
    outline: 2px solid vars.$info-blue;
    outline-offset: 2px;
  }
  
  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

@mixin button-gradient($color1, $color2) {
  @include button-base();
  background: linear-gradient(135deg, $color1 0%, $color2 100%);
  color: white;
  
  &:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow: 0 8px 25px rgba($color1, 0.3);
  }
  
  &:active {
    transform: translateY(0);
  }
}

// ============================================================================
// üìä MIXINS PARA PANELES DE RESULTADOS
// ============================================================================
@mixin result-panel-enhanced() {
  background: vars.$result-card-gradient;
  border-radius: vars.$radius-lg;
  padding: vars.$spacing-lg;
  box-shadow: vars.$shadow-md;
  border: 1px solid rgba(59, 130, 246, 0.1);
  transition: vars.$transition-normal;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: vars.$shadow-lg;
  }
}

// ============================================================================
// üí´ MIXINS PARA TARJETAS DE FAVORITOS/CONVERSIONES
// ============================================================================
@mixin favorite-card-base() {
  @include glass-card();
  padding: vars.$spacing-lg;
  transition: vars.$transition-normal;
  position: relative;
  overflow: hidden;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      135deg,
      rgba(59, 130, 246, 0.03) 0%,
      rgba(16, 185, 129, 0.03) 50%,
      rgba(251, 191, 36, 0.03) 100%
    );
    pointer-events: none;
  }
  
  &:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 
      0 20px 40px rgba(31, 38, 135, 0.15),
      0 8px 24px rgba(0, 0, 0, 0.08);
    
    &::before {
      background: linear-gradient(
        135deg,
        rgba(59, 130, 246, 0.08) 0%,
        rgba(16, 185, 129, 0.08) 50%,
        rgba(251, 191, 36, 0.08) 100%
      );
    }
  }
}

@mixin conversion-card-enhanced() {
  @include favorite-card-base();
  border-left: 4px solid transparent;
  
  &.positive {
    border-left-color: vars.$success-green;
    
    &:hover {
      box-shadow: 
        0 20px 40px rgba(76, 175, 80, 0.2),
        0 8px 24px rgba(0, 0, 0, 0.08);
    }
  }
  
  &.negative {
    border-left-color: vars.$error-red;
    
    &:hover {
      box-shadow: 
        0 20px 40px rgba(244, 67, 54, 0.2),
        0 8px 24px rgba(0, 0, 0, 0.08);
    }
  }
  
  &.neutral {
    border-left-color: vars.$conversion-neutral;
    
    &:hover {
      box-shadow: 
        0 20px 40px rgba(107, 114, 128, 0.2),
        0 8px 24px rgba(0, 0, 0, 0.08);
    }
  }
}